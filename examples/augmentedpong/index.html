<!doctype html><title>augmented gesture examples</title>
<script src="../../vendor/requestanimationframe.js"></script>

<script src="../../vendor/imageprocessing.js"></script>

<script src="../../vendor/dat.gui/dat.gui.js"></script>

<script src="../../src/augmentedgesture.js"></script>
<script src="../../src/gesturerecognition.js"></script>

<script src="../../vendor/Stats.js"></script>

<script src="tquery-bundle.js"></script>

<script src="ball.js"></script>

<!--<script src="../../build/augmentedgesture.js"></script>
-->
<body><script>
	
	var aGesture	= new AugmentedGesture().enableDatGui().start().domElementThumbnail();

	var world	= tQuery.createWorld().boilerplate().start();
	world.renderer().domElement.style.zIndex	= 10000;
	world.removeCameraControls();


	var players	= { 'right' : {}, 'left': {} };	
	var racketW	= 0.25*0.5;
	var racketH	= 1.00*0.5;
	var racketRangeY= 2;
	var fieldW	= 2.7;
	var fieldH	= 1.8;
	var ballRadius	= 1/5;
	
	
	Object.keys(players).forEach(function(playerId){
		var player	= players[playerId];

		var object3d	= tQuery.createCube().addTo(world).scale(0.25,1,0.5).scaleBy(0.5);
		player.object3d	= object3d;
		object3d.translateX(1.3 * (playerId === "right" ? +1 : -1));

		var pointerId	= playerId;
		var pointerOpts	= new AugmentedGesture.OptionPointer();
		aGesture.addPointer(pointerId, pointerOpts);
		if( playerId === 'right' ){
			pointerOpts.pointer.crossColor	= {r:  255, g:  50, b:   50};
			pointerOpts.colorFilter.r	= {min: 160, max: 255};
			pointerOpts.colorFilter.g	= {min:   0, max: 255};
			pointerOpts.colorFilter.b	= {min:   0, max: 100};			
		}else{
			pointerOpts.pointer.crossColor	= {r:   50, g: 255, b:   50};
			pointerOpts.colorFilter.r	= {min:   0, max: 145};
			pointerOpts.colorFilter.g	= {min: 165, max: 255};
			pointerOpts.colorFilter.b	= {min:  60, max: 200};						
		}

		aGesture.bind("mousemove."+pointerId, function(e){
			var x	= e.x / (320/4);
			var y	= e.y / (240/4);
			
			object3d.get(0).position.y	= -(-racketRangeY/2 + y*racketRangeY);
		});

	})

	console.log("players", players)
	var ball	= new Ball();
	world.loop().hook(function(){
		ball.update();
	});


</script></body>