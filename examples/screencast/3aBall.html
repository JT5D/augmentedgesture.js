<!DOCTYPE html><title>Augmented pong in webgl</title>
<script src="../../build/augmentedgesture-bundle.js"></script>
<script src="tquery-bundle.js"></script>
<body><script>
	// create a AugmentedGesture
	var aGesture    = new AugmentedGesture().enableDatGui().start().domElementThumbnail();
			
	// init world of tQuery
        var world	= tQuery.createWorld().boilerplate().start();	
	// no camera controls is needed
	world.removeCameraControls();
	
	// PLAYERS
	var racketW    = 0.25*0.5;
	var racketH    = 1.00*0.5;
	var racketRangeY= 2;
	var players    = { 'right' : {}, 'left': {} };
	// loop over each player
	Object.keys(players).forEach(function(playerId){
		var player  = players[playerId];
		// create tQuery.Object3D for a racket
		var object3d	= tQuery.createCube().addTo(world).scale(0.25,1,0.5).scaleBy(0.5);
		object3d.translateX(1.3 * (playerId === "right" ? +1 : -1));
		player.object3d	= object3d;
		
		// add a pointer for this player
		var pointerOpts	= new AugmentedGesture.OptionPointer();
		aGesture.addPointer(playerId, pointerOpts);
		// tune the color for the ball of this pointer
		if( playerId === "right" ){ 
			pointerOpts.pointer.crossColor    = {r:  255, g:  50, b:   50};
			pointerOpts.colorFilter.r    = {min: 160, max: 255};
			pointerOpts.colorFilter.g    = {min:   0, max: 255};
			pointerOpts.colorFilter.b    = {min:   0, max: 100};
		}else{
			pointerOpts.pointer.crossColor  = {r:   50, g: 255, b:   50};
			pointerOpts.colorFilter.r   = {min:   0, max: 145};
			pointerOpts.colorFilter.g   = {min: 165, max: 255};
			pointerOpts.colorFilter.b   = {min:  60, max: 200};
		}
		// bind aGesture 'mousemove' event and update tQuery.Object3d position with it
		aGesture.bind("mousemove."+playerId, function(event){
			object3d.get(0).position.y  = -(-racketRangeY/2 + event.y*racketRangeY);
		});
	});
	
	// Ball

	// constant for the ball
	var ballRadius    = 1/5;
	// create a tQuery.Object3d for the ball
	var ball3d = tQuery.createSphere().addTo(world).scaleBy(ballRadius);
	var angle    = Math.random()*Math.PI*2;
	var ballVelX    = Math.cos(angle)*0.03;
	var ballVelY    = Math.sin(angle)*0.03;
</script></body>